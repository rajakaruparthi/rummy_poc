<span style="float: left;">{{ currentPlayer }} is playing now ..... </span>
<span style="float: right;"
  >Logged in as <b>{{ player }}</b></span
>
<table class="table table-dark"  style="border-spacing: 10px;">
  <tbody>
    <td
      *ngFor="let usr of playersObs | async; let i = index"
      [ngClass]="{ selected: i == currentPlayerIndex }"
    >
      <b>{{ usr.name }}</b>
    </td>
  </tbody>
</table>

<div>
  <div
    style="height: 20%;"
    *ngFor="let each of playerCardsEmiter | async; let i = index"
  >
    <div
      *ngIf="each.name === player"
      cdkDropList
      #cardList="cdkDropList"
      [cdkDropListData]="each.cards"
      cdkDropListOrientation="horizontal"
      class="example-list"
      [cdkDropListConnectedTo]="[openCardList]"
      (cdkDropListDropped)="drop($event, each.cards)"
    >
      <div
        class="example-box"
        *ngFor="let image of each.cards; let i = index"
        cdkDrag
      >
        <img style="width: 200%;" src="../../assets/cards/{{ image }}.jpg" />
      </div>
    </div>
  </div>

  <div style="background-color: white;">
    <div
      [ngClass]="{ disableDiv: currentPlayer != player }"
      cdkDropList
      #deckList="cdkDropList"
      [cdkDropListData]="deck"
      cdkDropListOrientation="horizontal"
      [cdkDropListConnectedTo]="[cardList]"
      (cdkDropListDropped)="dropDeckTopCard($event)"
      cdkDragHandle
    >
      <div>
        <img
          *ngIf="deck.length > 0"
          cdkDrag
          style="width: 15%;"
          src="../../assets/cards/Yellow_back.jpg"
        />
        <!-- transform: rotate(90deg); -->
        <img
          *ngIf="openJoker !== null"
          style="width: 15%; z-index: -1;"
          src="../../assets/cards/{{ openJoker }}.jpg"
        />
        <button
          *ngIf="currentPlayer == player"
          style="float: right;"
          (click)="onFold(currentPlayerIndex)"
          class="btn btn-danger"
        >
          Fold
        </button>
      </div>
    </div>
    <div
      [ngClass]="{ disableDiv: currentPlayer != player }"
      cdkDropList
      #openCardList="cdkDropList"
      [cdkDropListData]="openCard"
      cdkDropListOrientation="horizontal"
      [cdkDropListConnectedTo]="[cardList]"
      (cdkDropListDropped)="dropOpenCard($event)"
    >
      <img
        cdkDrag
        style="width: 15%;"
        src="../../assets/cards/{{ openCard[0] }}.jpg"
      />
    </div>
  </div>
</div>

<div>
  <button
    *ngIf="startFlag"
    class="btn btn-secondary"
    (click)="distribute()"
    style="float: right;"
  >
    Start Game
  </button>
</div>
